+++
draft = false
date="2013-03-02 22:19:11"
title="Ruby/Haml: Maintaining white space/indentation in a &lt;pre&gt; tag"
tag=['ruby', 'haml']
category=['Ruby']
+++

<p>I've been writing a little web app in which I wanted to display cypher queries inside a <pre> tag which was then prettified using <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a> but I was having problems with how code on new lines was being displayed.</p>


<p>I had the following Haml code to display a query looking up Gareth Bale in a graph:</p>



~~~haml

%pre{ :class => "brush: cypher; gutter: false; toolbar: false;"}
  START player = node:players('name:"Gareth Bale"') 
  RETURN player.name
~~~

<p>When I rendered the page it looked like this:</p>


<div>
<img src="http://www.markhneedham.com/blog/wp-content/uploads/2013/03/bale-broken-tiff.jpg" alt="Bale broken tiff" title="bale-broken-tiff.jpg" border="0" width="404" height="44" />
</div>

<p>After a bit of googling I ended up on this <a href="http://stackoverflow.com/questions/1993993/haml-with-pre-how-to-remove-unwanted-intend">Stack Overflow post</a> which described the <cite><a href="http://haml.info/docs/yardoc/Haml/Helpers.html#preserve-instance_method">preserve</a></cite> helper which seems to do the job:</p>



~~~haml

%pre{ :class => "brush: cypher; gutter: false; toolbar: false;"}
  = preserve do
    START player = node:players('name:"Gareth Bale"') 
    RETURN player.name
~~~

<p>That part of the page now looks much better:</p>


<div>
<img src="http://www.markhneedham.com/blog/wp-content/uploads/2013/03/bale-fixed.jpg" alt="Bale fixed" title="bale-fixed.jpg" border="0" width="401" height="39" />
</div>
