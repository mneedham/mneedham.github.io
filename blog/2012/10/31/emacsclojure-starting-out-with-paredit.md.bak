+++
draft = false
date="2012-10-31 08:41:09"
title="Emacs/Clojure: Starting out with paredit"
tag=['clojure', 'emacs', 'paredit']
category=['Clojure']
+++

I've been complaining recently to <a href="https://twitter.com/jennifersmithco">Jen</a> and <a href="https://twitter.com/otfrom">Bruce</a> about the lack of a beginner's guide to <a href="http://emacswiki.org/emacs/ParEdit">emacs paredit mode</a> which seems to be the defacto approach for people working with Clojure and both pointed me to the <a href="http://emacswiki.org/emacs/PareditCheatsheet">paredit cheat sheet</a>.

While it's very comprehensive, I found that it's a little overwhelming for a complete newbie like myself.

I therefore thought it'd be useful to write a bit about a couple of things that I've picked up from pairing with Jen on little bits of Clojure over the last couple of months.

Let's say we start with a simple function to add two numbers together:

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.16.18.jpeg" alt="Screen shot 2012 10 31 at 08 16 18" title="Screen shot 2012-10-31 at 08.16.18.jpeg" border="0" width="124" height="57" />

And say for example we decide that we want to add 5 to the result so the function adds the two numbers together and then adds 5. 

Jen showed me that the best way to do this is to go beyond the furthest bracket to the left and start typing there:

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.23.15.jpeg" alt="Screen shot 2012 10 31 at 08 23 15" title="Screen shot 2012-10-31 at 08.23.15.jpeg" border="0" width="122" height="54" />

The brackets are now a bit misaligned. We need the ')' where the cursor currently is to go to the end of the line. 

One way to do this is to move the cursor in front of the '(' of the second '+' on the line and press 'Ctrl + K' which in emacs means 'kill line to end' but in this case kills to the end of the expression that we're at the beginning of:

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.25.16.jpeg" alt="Screen shot 2012 10 31 at 08 25 16" title="Screen shot 2012-10-31 at 08.25.16.jpeg" border="0" width="118" height="53" />

We then move the cursor back to just after the '5' and press 'Ctrl + Y' which in emacs means re-insert the last text that was killed:

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.26.04.jpeg" alt="Screen shot 2012 10 31 at 08 26 04" title="Screen shot 2012-10-31 at 08.26.04.jpeg" border="0" width="129" height="48" />

This works but it's a little bit long winded and Jen showed me a quicker way.

If we go back to the position where we had just inserted the '+ 5' and place our cursor just in front of the ')':

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.23.15.jpeg" alt="Screen shot 2012 10 31 at 08 23 15" title="Screen shot 2012-10-31 at 08.23.15.jpeg" border="0" width="122" height="54" />

We can then press 'Ctrl + Shift + Right Arrow' to push the right bracket to the end of the line:

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.32.07.jpeg" alt="Screen shot 2012 10 31 at 08 32 07" title="Screen shot 2012-10-31 at 08.32.07.jpeg" border="0" width="121" height="49" />

From what I can tell, this can also be achieved by pressing 'Meta + X' followed by 'paredit-forward-slurp-sexp' or 'Meta + Shift + )'.

We have to be a little bit careful about where we position the cursor because if we put it after the bracket then we can end up bringing another function into our one by mistake!

For example say just below our 'add' function we have a subtract one:

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.34.31.jpeg" alt="Screen shot 2012 10 31 at 08 34 31" title="Screen shot 2012-10-31 at 08.34.31.jpeg" border="0" width="153" height="97" />

And we put our cursor just after the ')' of the '+ 5' bit of code and press 'Ctrl + Shift + RIght Arrow':

<img src="http://www.markhneedham.com/blog/wp-content/uploads/2012/10/Screen-shot-2012-10-31-at-08.35.24.jpeg" alt="Screen shot 2012 10 31 at 08 35 24" title="Screen shot 2012-10-31 at 08.35.24.jpeg" border="0" width="164" height="104" />

We now have a bizarre looking function 'add' which has the 'subtract' function contained inside it!

At the moment this is the main paredit shortcut I know and it seems to work reasonably well. I also find myself using 'Ctrl + Shift + -' which allows me to undo any mistakes I make!

Now to learn my next command! Any suggestions?
