
<!DOCTYPE html>
<html lang="en-us">

    <head>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        
        <meta property="og:title" content="QuickGraph #7: An entity graph of TWIN4j using APOC NLP | Mark Needham" />
        <meta property="og:site_name" content="Mark Needham" />
        <meta property="og:url" content="https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/" />

    
        <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2020-05-05T00:21:00Z" />
        <meta property="og:article:tag" content="quickgraph" />
        <meta property="og:article:tag" content="nlp" />
        <meta property="og:article:tag" content="apoc" />
        <meta property="og:article:tag" content="twin4j" />
        

        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@markhneedham" />
        <meta name="twitter:creator" content="@markhneedham" />
        <meta name="twitter:title" content="QuickGraph #7: An entity graph of TWIN4j using APOC NLP" />
        
          <meta name="twitter:description" content="Learn how to use the APOC Library to add NLP functionality to your graph applications." />
        
        <meta name="twitter:url" content="https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/" />

      
        
        <meta name="og:image" content="https://www.markhneedham.com/blog//uploads/2020/05/apoc-nlp.png" />
        <meta name="image" property="og:image" content="https://www.markhneedham.com/blog//uploads/2020/05/apoc-nlp.png">
        <meta name="twitter:image:src" content="https://www.markhneedham.com/blog//uploads/2020/05/apoc-nlp.png" />
        <meta name="twitter:image" content="https://www.markhneedham.com/blog//uploads/2020/05/apoc-nlp.png" />
      

    

        
        <title>QuickGraph #7: An entity graph of TWIN4j using APOC NLP | Mark Needham</title>

    
        <meta name="description" content="Learn how to use the APOC Library to add NLP functionality to your graph applications." />
    

        <meta name="p:domain_verify" content="fc173d84e3a4de948ed4bda2908afd3e"/>
        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        

        
        
        <link href="https://www.markhneedham.com/blog/index.xml" rel="alternate" type="application/rss+xml" title="Mark Needham" />
          
        

        <link rel="canonical" href="https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/" />

    
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "QuickGraph #7: An entity graph of TWIN4j using APOC NLP",
        "author": {
            "@type": "Person",
            "name": "http://profiles.google.com/100354797468725665406?rel=author"
        },
        "datePublished": "2020-05-05",
        "description": "One of the most popular use cases for Neo4j is knowledge graphs, and part of that process involves using NLP to create a graph structure from raw text. If we were doing a serious NLP project we’d want to use something like GraphAware Hume, but in this blog post we’re going to learn how to add basic NLP functionality to our graph applications.\nFigure 1. Building an entity graph of TWIN4j using APOC NLP APOC NLP The big cloud providers (AWS, GCP, and Azure) all have Natural Language Processing APIs and, although their APIs aren’t identical, they all let us extract entities, key phrases, and sentiment from text documents.",
        "wordCount":  2836 
    }
    </script>
    

    

<style>
*{padding:0;margin:0}body,html{font-size:1em;line-height:1.65em;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;font-weight:300;color:#444}html{height:100%}body{padding:2em 2.5em 1em 20em}header{border-right:1px #eee solid;padding:2em;position:fixed;top:0;left:0;height:100%;width:13.5em}#content{display:block;width:100%}footer{padding:1em 0 2.5em;font-size:.8em;line-height:1.5em;color:#888}article{border-bottom:.1em #eee solid;padding-bottom:1.7em;max-width:56em}h4,h5,h6,hr,p{margin-top:.9em;margin-bottom:.9em}h1,h2,h3,h4,h5,h6{font-family:"Bree Serif",serif;font-weight:400!important}h1{font-size:2.5em;line-height:1.1em;margin-top:.6em;margin-bottom:.6em}h2{font-size:1.9em;line-height:1.2em;margin-top:.7em;margin-bottom:.7em}h3{font-size:1.4em;line-height:1.3em;margin-top:.8em;margin-bottom:.8em}h4{font-size:1.3em}h5{font-size:1.2em}h6{font-size:1.1em}iframe,img{max-width:100%}a{font-weight:700;text-decoration:none;color:#5cc265}a:hover{text-decoration:underline}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{font-weight:400!important}strong{font-weight:700}blockquote{border-left:.4em solid #008cc1;padding-left:1.2em;font-size:1.3em}hr{border:0;height:1px;background:#eee}ol,ul{margin-left:3em}code{font-size:1.1em;max-height: 500px;background:#0d1117}
pre{border-radius: .6em;font-size:.8em;line-height:1.7em;color:#c9d1d9;background:#0d1117;padding:2.0em 0.75em 2.0em 0.75em;word-break:break-all;word-wrap:break-word;white-space:pre;white-space:-moz-pre-wrap;white-space:pre-wrap}input{font-size:1em;padding:.3em}header h1{font-size:1.9em;margin-top:.8em;margin-bottom:.6em}header h1 a{color:#444}header h1 a:hover{text-decoration:none}header #logo img{width:9em;height:9em;border-radius:4.5em;-moz-border-radius:4.5em;-webkit-border-radius:4.5em;border:none}#follow-icons{font-size:.7em;margin-top:-.7em;margin-bottom:1.5em}#follow-icons a{color:#ccc}#follow-icons span{vertical-align:top;margin-left:-.15em;margin-right:-.15em}#follow-icons span .fa-stack-1x{font-size:1.05em;line-height:1.9em}header h6{margin-top:.5em}article span.post-stamp{color:#888}h1.post-title{margin-top:.35em;margin-bottom:.6em}h3.post-title{margin-top:.4em;padding-bottom:.9em;border-bottom:1px solid #eee;font-size:1.2em;color:#444}.post-title .feature-star{font-size:.9em}.feature-star,.separator,.taglist{color:#ccc}.taglist a{background-color:#008cc1;color:#fff;display:inline-block;line-height:1.5em;padding:.3em .6em;vertical-align:20%;font-size:.5em;font-family:"Open Sans",sans-serif;font-weight:700!important;text-transform:uppercase;letter-spacing:.05em;border-radius:.25em;-moz-border-radius:.25em;-webkit-border-radius:.25em}#social-bar{margin-top:1.5em;background-color:#eee;padding:.5em}#comments{margin-top:.15em;padding-bottom:.2em;border-bottom:1px solid #eee}.pagination{margin-bottom:1em}footer a{font-weight:300;color:#888;text-decoration:underline}footer a:hover{color:#444;text-decoration:none}@media only screen and (min-width:1281px){body,html{font-size:1.1em}}@media only screen and (max-width:800px){body{padding:0}header{border-right:none;border-bottom:1px #eee solid;position:relative;height:auto;width:auto;text-align:center;padding-bottom:1em}#content{margin-left:0;padding:2em 2em 1em;width:auto}footer{padding:0 2.5em 2em}}@media only screen and (max-width:320px){#content,header{padding:1.2em 1.2em .6em}footer{padding:0 1.5em 1.2em}ol,ul{margin-left:2em}}
</style>

<style>
@media only screen and (max-width: 1000px) {
    table, caption {
        width: 100%;
        overflow-x: auto;
        display: block;
    }
}

@media only screen and (max-width: 800px) {
    #header {
        padding: 5px;
        display: flex;
        align-items: center;   
        flex-wrap: wrap;       
        justify-content: center;  
        flex-wrap: nowrap;    
        overflow-x: auto;     
        padding: 5px;
    }

    #header a {
        margin-bottom: -0.5em;
        margin-right: 1em;
    }

    #header #logo img {
        width: 30px;    
        height: auto;  
    }
    #header h1 {
        font-size: 1em;    
        margin-right: 1em;
    }
    #header p {
        display: none;    
    }
    #follow-icons a i {
        font-size: 1em;    
    }

    #follow-icons {
        font-size: 1.5em;
        margin-bottom: 0;
        margin-top: 0;
    }

    #follow-icons a {    
        margin-right: 0;
    } 
}

p code, caption code{
    font-size:1.2em;
    background:#fff
}

pre.highlight {
    position: relative;
}


.label-right {
    color: #FFF;
    padding: 2px 5px;   
    border-radius: 0 0 0 0.25em;
    font-size: 1.1em;
    font-weight: 500;
    position: absolute;
    top: 0;
    right: 0;
}

.green-icon {
    color: lime;
}

.copy-button {
    cursor: pointer;  
    margin-right: 0.25em;
    padding: 0.25em 0 0 0;
}

.copy-notification {
    position: absolute;
    right: 0;
    top: 0;
    padding: 2px 5px;
    background-color: #0d1117;
    color: #fff;
}


.stretch{width:100%}
table{border-collapse:collapse;border-spacing:0}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;}
table thead,table tfoot{background:#008cc1;}
table thead tr th{background:#008cc1;}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table thead tr th {color: #ffffff;}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8);}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6;}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0; margin-top: 0;}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{margin-top: 0.5em;}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
td>div.verse{white-space:pre}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock,th.tableblock{font-size:0.8em}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#008cc1;font-weight:350;margin-top:.75em;margin-bottom:.25em}

.listingblock>.title {
    background: linear-gradient(90deg, rgba(151,231,255,1) 0%, rgba(0,140,193,1) 35%, rgba(151,231,255,1) 100%);
    padding: 0.4em;
    color: black;
    margin-bottom: 0;
    
    font-size: 0.7em;
    font-weight: 600;
    border-radius: 0.6em 0.6em 0 0;
}

.listingblock>.title + div.content pre {
    border-radius: 0 0 .6em .6em;
}

.listingblock:has(code[data-lang="text"]) > .title {
    text-transform: uppercase;
}

.admonitionblock {
    margin: 0 0 1.5rem;
    border-left: 4px solid #000000;
    border-radius: .25rem;
}
.admonitionblock.note {
    background-color: #edf2f7;
    color: #19407c;
    border-left-color: #718096;
}
.admonitionblock.warning {
    background-color: #fff6e6;
    color: #19407c;
    border-left-color: #FFA500;
}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;display:none;}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}

tbody tr pre {margin-bottom: 27px}

.colist, .dlist, .exampleblock, .imageblock, .listingblock, .literalblock, .olist, .paragraph, .partintro, .quoteblock, .sidebarblock, .ulist, .verseblock {
    margin: 0 0 1.5rem;
}

.colist {
    margin: 0;
}

.colist table {
    margin: 0;
    border: none;
}

.conum { display: inline-block; color: white !important; background-color: #008cc1; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

.colist>table tr>td:first-of-type{ border:0; min-width:0; padding:0 .75em;}
.colist>table tr>td:last-of-type{ border:0; min-width:0; padding:.25em 0}
.colist>table tr:nth-child(even) { background:0 0 }

.listingblock + .colist {
    margin-top: -0.7rem;
}
</style>

    </head>
    <body>
        <header id="header">
            <a id="logo" href="https://www.markhneedham.com/blog/"><img src="https://www.markhneedham.com/blog//me.jpg" alt="Mark Needham" /></a>
            <h1><a href="https://www.markhneedham.com/blog/">Mark Needham</a></h1>
            <p>Learn how to use the APOC Library to add NLP functionality to your graph applications.</p>

            <div id="follow-icons">
	<a href="http://twitter.com/markhneedham" rel="me"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="https://www.youtube.com/channel/UCKEk670ECmteGBehmDjVSSg" rel="me"><i class="fa fa-youtube-square fa-2x"></i></a>
	<a href="http://linkedin.com/in/markhneedham" rel="me"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="http://github.com/mneedham" rel="me"><i class="fa fa-github-square fa-2x"></i></a>
	<a href="mailto:m.h.needham@gmail.com"><i class="fa fa-envelope-square fa-2x"></i></a>
	<a href="https://www.markhneedham.com/blog/index.xml" rel="me"><i class="fa fa-rss-square fa-2x"></i></a>
</div>

            
        </header>

<main id="content">

<article id="" class="2020">
    <div class="post-stamp">
        <time datetime="2020-05-05T00:21:00Z">
            5 May 2020
        </time>
        <span class="taglist">
        
        &middot;
        
            <a href="https://www.markhneedham.com/blog/tag/quickgraph/">quickgraph</a>
        
            <a href="https://www.markhneedham.com/blog/tag/nlp/">nlp</a>
        
            <a href="https://www.markhneedham.com/blog/tag/apoc/">apoc</a>
        
            <a href="https://www.markhneedham.com/blog/tag/twin4j/">twin4j</a>
        
        
        </span>
    </div>
    <h1 class="post-title">QuickGraph #7: An entity graph of TWIN4j using APOC NLP</h1>
    <div class="paragraph">
<p>One of the most popular use cases for Neo4j is knowledge graphs, and part of that process involves using NLP to create a graph structure from raw text.
If we were doing a serious NLP project we’d want to use something like <a href="https://graphaware.com/products/hume/" target="_blank" rel="noopener">GraphAware Hume</a>, but in this blog post we’re going to learn how to add basic NLP functionality to our graph applications.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://www.markhneedham.com/blog/
/uploads/2020/05/apoc-nlp.png" alt="apoc nlp"/>
</div>
<div class="title">Figure 1. Building an entity graph of TWIN4j using APOC NLP</div>
</div>
<div class="sect1">
<h2 id="_apoc_nlp">APOC NLP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The big cloud providers (AWS, GCP, and Azure) all have Natural Language Processing APIs and, although their APIs aren’t identical, they all let us extract entities, key phrases, and sentiment from text documents.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://www.markhneedham.com/blog/
/uploads/2020/05/1_go7sTFOGN2fJGgYrI3E-FA.png" alt="1 go7sTFOGN2fJGgYrI3E FA"/>
</div>
<div class="title">Figure 2. AWS, GCP, Azure</div>
</div>
<div class="paragraph">
<p>While these APIs are easy to enough to use via client drivers, we thought it’d be fun to make them even more accessible by <a href="https://neo4j.com/docs/labs/apoc/current/nlp/" target="_blank" rel="noopener">adding procedures that call these APIs to the popular APOC Library</a>
Each procedure has two modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stream - returns a map constructed from the JSON returned from the API</p>
</li>
<li>
<p>Graph - creates a graph or virtual graph based on the values returned by the API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the moment we’ve got procedures covering some of the <a href="https://neo4j.com/docs/labs/apoc/current/nlp/aws/" target="_blank" rel="noopener">AWS</a> and <a href="https://neo4j.com/docs/labs/apoc/current/nlp/gcp/" target="_blank" rel="noopener">GCP</a> endpoints, but we’ll be adding more over time.
In this blog post we’re going to learn how to use the AWS procedures.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_problem">The Problem</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We’re going to use the procedures to build a mini recommendation engine for <a href="https://neo4j.com/tag/twin4j" target="_blank" rel="noopener">This Week in Neo4j (TWIN4j)</a>, Neo4j’s weekly newsletter.
The newsletter covers wide ranging topics, which means that if you like one version of the newsletter, it doesn’t necessarily mean that you’ll like the next one!</p>
</div>
<div class="paragraph">
<p>The NLP procedures let us build a graph of entities in each newsletter, which we can use to recommend other newsletters that a user might like to read.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_importing_twin4j_blog_posts">Importing TWIN4j blog posts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we do any NLP work, we need to load the TWIN4j blog posts into Neo4j.
We can get a list of all those posts from the Wordpress JSON API.
We’ll process the resulting documents using APOC’s Load JSON procedure.</p>
</div>
<div class="paragraph">
<p>We can see the available keys/properties on each document by running the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">CALL apoc.load.json(&#34;https://neo4j.com/wp-json/wp/v2/posts?tags=3201&#34;)
YIELD value
RETURN keys(value)
LIMIT 1</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Results</caption>
<colgroup>
<col style="width: 100%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">keys(value)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;date&#34;, &#34;template&#34;, &#34;_links&#34;, &#34;link&#34;, &#34;type&#34;, &#34;title&#34;, &#34;content&#34;, &#34;featured_media&#34;, &#34;modified&#34;, &#34;id&#34;, &#34;categories&#34;, &#34;date_gmt&#34;, &#34;slug&#34;, &#34;modified_gmt&#34;, &#34;author&#34;, &#34;yst_prominent_words&#34;, &#34;format&#34;, &#34;comment_status&#34;, &#34;yoast_head&#34;, &#34;tags&#34;, &#34;ping_status&#34;, &#34;meta&#34;, &#34;sticky&#34;, &#34;guid&#34;, &#34;excerpt&#34;, &#34;status&#34;]</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We’re interested in the <code>title</code>, <code>date</code>, and <code>link</code> properties.
Let’s create nodes with the <code>Article</code> label by running the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">CALL apoc.load.json(&#34;https://neo4j.com/wp-json/wp/v2/posts?tags=3201&#34;)
YIELD value
MERGE (a:Article {id: value.id})
SET a.title = value.title.rendered,
    a.date = datetime(value.date),
    a.link = value.link;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default the WordPress API returns 10 items per page, which means that this query will create nodes for 10 TWIN4j entries.
We’ll use APOC’s Periodic Iterate procedure to loop over the pages in the API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">CALL apoc.periodic.iterate(
  &#34;UNWIND range(1,16) AS page RETURN page&#34;,
  &#34;CALL apoc.load.json(&#39;https://neo4j.com/wp-json/wp/v2/posts?tags=3201&amp;page=&#39; + page)
   YIELD value
   MERGE (a:Article {id: value.id})
   SET a.title = value.title.rendered,
       a.date = datetime(value.date)
       a.link = value.link;
  &#34;,
  {}
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are cheating a bit here by hard coding the highest page to 16.
Ideally we’d have a more flexible approach, but we’ll leave that for another day/blog post.</p>
</div>
<div class="paragraph">
<p>Once that query has finished, we can check how many articles have been created by running the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (:Article)
RETURN count(*);</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Results</caption>
<colgroup>
<col style="width: 100%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">count(*)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">159</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All good so far.
And finally we’re going to use APOC’s <a href="https://neo4j.com/docs/labs/apoc/current/import/html/" target="_blank" rel="noopener">Load HTML</a> to scrape those pages and store the content in the <code>body</code> property of each node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">CALL apoc.periodic.iterate(
  &#34;MATCH (a:Article) WHERE not(exists(a.body)) RETURN a&#34;,
  &#34;CALL apoc.load.html(a.link, {body: &#39;div.entry-content&#39;})
   YIELD value
   SET a.body = value.body[0].text&#34;,
  {batchSize: 10 });</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_apoc_nlp_procedures">Enabling APOC NLP procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default the NLP procedures aren’t enabled once we’ve installed APOC.
We’ll need to add the NLP dependencies jar that is published <a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases/">with each release</a>.</p>
</div>
<div class="paragraph">
<p>At the time of writing, the latest release is 4.0.0.10 and the dependencies jar can be downloaded from <a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases/download/4.0.0.10/apoc-nlp-dependencies-4.0.0.10.jar" target="_blank" rel="noopener">apoc-nlp-dependencies-4.0.0.10.jar</a>.</p>
</div>
<div class="paragraph">
<p>Add that file to your <code>plugins</code> directory, restart the database, and then check that the procedures are available by running the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">CALL apoc.help(&#34;nlp.aws&#34;);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If everything’s working as it should, we’ll see the following output:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Results</caption>
<colgroup>
<col style="width: 16.6666%;"/>
<col style="width: 16.6666%;"/>
<col style="width: 16.6666%;"/>
<col style="width: 16.6666%;"/>
<col style="width: 16.6666%;"/>
<col style="width: 16.667%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">text</th>
<th class="tableblock halign-left valign-top">signature</th>
<th class="tableblock halign-left valign-top">roles</th>
<th class="tableblock halign-left valign-top">writes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;procedure&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.entities.graph&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Creates a (virtual) entity graph for provided text&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.entities.graph(source :: ANY?, config = {} :: MAP?) :: (graph :: MAP?)&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;procedure&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.entities.stream&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Returns a stream of entities for provided text&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.entities.stream(source :: ANY?, config = {} :: MAP?) :: (node :: NODE?, value :: MAP?, error :: MAP?)&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;procedure&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.keyPhrases.graph&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Creates a (virtual) key phrases graph for provided text&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.keyPhrases.graph(source :: ANY?, config = {} :: MAP?) :: (graph :: MAP?)&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;procedure&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.keyPhrases.stream&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Returns a stream of key phrases for provided text&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.keyPhrases.stream(source :: ANY?, config = {} :: MAP?) :: (node :: NODE?, value :: MAP?, error :: MAP?)&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;procedure&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.sentiment.graph&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Creates a (virtual) sentiment graph for provided text&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.sentiment.graph(source :: ANY?, config = {} :: MAP?) :: (graph :: MAP?)&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;procedure&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.sentiment.stream&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Returns stream of sentiment for items in provided text&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;apoc.nlp.aws.sentiment.stream(source :: ANY?, config = {} :: MAP?) :: (node :: NODE?, value :: MAP?, error :: MAP?)&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It’s NLP time!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_entity_extraction_using_apoc_nlp_procedures">Entity Extraction using APOC NLP procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To run the AWS procedures we’ll need to have our AWS access key ID and secret access key available.
We’ll set them as parameters by running the following commands:s</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">:param apiKey =&gt; (&#34;&lt;api-key-here&gt;&#34;);
:param apiSecret =&gt; (&#34;&lt;api-secret-here&gt;&#34;);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let’s extract the entities for one of our articles.</p>
</div>
<div class="paragraph">
<p>By default AWS’s NLP API has a <a href="https://docs.aws.amazon.com/comprehend/latest/dg/guidelines-and-limits.html#limits-all" target="_blank" rel="noopener">maximum size of 5,000 bytes</a> per document, so we’ll need to find an article that’s shorter than that in length.
We can  which articles are applicable using the <code>size</code> function on the <code>body</code> property of our articles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (n:Article)
WHERE size(n.body) &lt;= 5000
RETURN n.link, size(n.body) AS sizeInBytes, n.date
ORDER BY n.date DESC
LIMIT 5;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Results</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">n.link</th>
<th class="tableblock halign-left valign-top">sizeInBytes</th>
<th class="tableblock halign-left valign-top">n.date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-covid-19-contact-tracing-de-duplicating-the-bbc-goodfood-graph-stored-procedures-in-neo4j-4-0-sars-cov-2-taxonomy/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4326</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-25T00:00:05Z</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-spring-data-neo4j%e2%9a%a1rx-released-graphs4good-graphhack-covid-19-special-multi-level-marketing-with-graphs/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4331</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-18T00:00:28Z</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-graph-data-science-library-announced-neo4j-reactive-drivers-scm-analytics-sao-paulos-subway-system/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4711</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-11T00:00:20Z</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-covid-19-contact-tracing-supply-chain-management-whats-new-in-neo4j-desktop/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4746</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-04T00:00:26Z</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-neo4j-bi-connector-covid-19-supply-chain-management/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4929</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-03-28T00:00:47Z</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The blog post from a couple of weeks ago looks like a good candidate.
We can return a stream of the entities in that article by running the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (n:Article)
WHERE size(n.body) &lt;= 5000
WITH n
ORDER BY n.date DESC
LIMIT 1
CALL apoc.nlp.aws.entities.stream(n, {
  key: $apiKey,
  secret: $apiSecret,
  nodeProperty: &#34;body&#34;
})
YIELD value
UNWIND value.entities AS entity
RETURN DISTINCT entity.text, entity.type
LIMIT 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we run this query, we’ll see the following output:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Results</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">entity.text</th>
<th class="tableblock halign-left valign-top">entity.type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;this week&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;DATE&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Lju&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;ORGANIZATION&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;BBC&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;ORGANIZATION&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Rik Van Bruggen&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;PERSON&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;COVID-19&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;OTHER&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;SARS-Cov-2&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;OTHER&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Martin Preusse&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;PERSON&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Max De Marzi&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;PERSON&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Neo4j&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;TITLE&#34;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Mark&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;PERSON&#34;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This query actually returns 63 entities, but we’re only showing the top 10 for brevity.
The full set of entities is better visualised using the graph variant of the procedure, shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (n:Article)
WHERE size(n.body) &lt;= 5000
WITH n
ORDER BY n.date DESC
LIMIT 1
CALL apoc.nlp.aws.entities.graph(n, {
  key: $apiKey,
  secret: $apiSecret,
  nodeProperty: &#34;body&#34;,
  write: false
})
YIELD graph AS g
RETURN g;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We’ve set <code>write: false</code>, which means a virtual graph is being returned.
If we want to persist the graph we can run the query again with <code>write: true</code>.</p>
</div>
<div class="paragraph">
<p>Running this query will result in the following Neo4j Browser visualisation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://www.markhneedham.com/blog/
/uploads/2020/05/entities-graph.svg" alt="entities graph"/>
</div>
<div class="title">Figure 3. TWIN4j Entities Graph</div>
</div>
<div class="paragraph">
<p>Some of the entities that have been extracted make sense, like the nodes for the people and projects mentioned.
Others are less useful - the node representing the <code>@</code> symbol and <code>-19</code> value for example.</p>
</div>
<div class="paragraph">
<p>Let’s now compute and store the entities for all applicable articles, by running the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (n:Article)
WHERE size(n.body) &lt;= 5000
WITH collect(n) AS articles
CALL apoc.nlp.aws.entities.graph(articles, {
  key: $apiKey,
  secret: $apiSecret,
  nodeProperty: &#34;body&#34;,
  writeRelationshipType: &#34;ENTITY&#34;,
  write: true
})
YIELD graph AS g
RETURN g;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query creates relationships of type <code>ENTITY</code> from the article nodes to each of the entity nodes created.
The entity nodes have an <code>Entity</code> label, as well as a label based on their type.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_querying_the_entity_graph">Querying the Entity Graph</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let’s explore the entity graph that we’ve just created.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_are_the_most_common_entities">What are the most common entities?</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (e:Entity)&lt;-[:ENTITY]-()
RETURN e.text, labels(e) AS labels, count(*) AS occurrences
ORDER BY occurrences DESC
LIMIT 10;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Results</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">e.text</th>
<th class="tableblock halign-left valign-top">labels</th>
<th class="tableblock halign-left valign-top">occurrences</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Neo4j&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Entity&#34;, &#34;Title&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">96</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;this week&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Date&#34;, &#34;Entity&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">95</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;This week&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Date&#34;, &#34;Entity&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">93</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;This Week&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Date&#34;, &#34;Entity&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">87</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Mark&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Entity&#34;, &#34;Person&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">78</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;neo4j&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Entity&#34;, &#34;Person&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">43</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Cypher&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Entity&#34;, &#34;Title&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">38</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;GraphConnect&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Entity&#34;, &#34;Organization&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;next week&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Date&#34;, &#34;Entity&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Graph&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Entity&#34;, &#34;Title&#34;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Not particularly revealing!
We have several variants of the phrase &#39;this week&#39;, and it looks like Neo4j is sometimes a <code>Title</code>, but sometimes a <code>Person</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_which_people_are_mentioned_most_often">Which people are mentioned most often?</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (e:Entity:Person)&lt;-[:ENTITY]-(article)
RETURN e.text, count(*) AS occurrences, date(max(article.date)) AS lastMention
ORDER BY occurrences DESC
LIMIT 10;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Results</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">e.text</th>
<th class="tableblock halign-left valign-top">occurrences</th>
<th class="tableblock halign-left valign-top">lastMention</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Mark&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">78</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-25</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;neo4j&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Max De Marzi&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-25</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;@&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-25</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Michael Hunger&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-10-12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Rik&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-25</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Will Lyon&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-11-09</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Michael&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Jennifer Reif&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-02-15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;David Allen&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-03-28</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Max De Marzi is a prolific blogger, so it’s not surprising to see him right up there at the top.
There are three members of the Neo4j DevRel team in the top 10: Michael Hunger, Will Lyon, and Jennifer Reif.
I would imagine that <em>Michael</em> is also Michael Hunger, so he’s actually in there twice.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_when_did_jennifer_and_max_both_appear_in_twin4j">When did Jennifer and Max both appear in TWIN4j?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I quite like reading articles written by Jennifer and Max.
How many versions of TWIN4j feature both of them?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">WITH [&#34;Max De Marzi&#34;, &#34;Jennifer Reif&#34;] AS people
MATCH (a:Article)
WHERE all(person IN people WHERE exists((:Entity {text: person})&lt;-[:ENTITY]-(a)))
RETURN a.link, a.title, date(a.date)
ORDER BY a.date DESC;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Results</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">a.link</th>
<th class="tableblock halign-left valign-top">a.title</th>
<th class="tableblock halign-left valign-top">date(a.date)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-nodes-keynote-cypher-eager-operator-releases-of-neo4j-ogm-and-jqassistant/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;This Week in Neo4j – NODES Keynote, Cypher Eager Operator, Releases of Neo4j OGM and jQAssistant&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-10-12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-nodes-2019-preview-grandstack-building-a-data-warehouse-with-neo4j-scale-up-your-d3-graph-visualisation/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;This Week in Neo4j – NODES 2019 Preview: GRANDstack, Building a Data Warehouse with Neo4j,&lt;br /&gt; Scale up your D3 graph visualisation&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-09-14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-explore-public-contracting-data-with-neo4j-rdbms-to-graph-page-overhaul-filtering-connected-dynamic-forms-graph-based-real-time-inventory/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;This Week in Neo4j – Explore public contracting data with Neo4j, RDBMS to Graph Page Overhaul, Filtering Connected Dynamic Forms, Graph-Based Real Time Inventory&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-05-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;https://neo4j.com/blog/this-week-in-neo4j-time-based-graph-versioning-pearson-coefficient-neo4j-multi-dc/&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;This Week in Neo4j – Time Based Graph Versioning, Pearson Coefficient, Neo4j Multi DC, Modeling Provenance&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-02-16</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Just the 4, and we have to go back to <a href="https://neo4j.com/blog/this-week-in-neo4j-nodes-keynote-cypher-eager-operator-releases-of-neo4j-ogm-and-jqassistant/" target="_blank" rel="noopener">October 2019</a> to find the last time they both featured in TWIN4j.
Jennifer was exploring Cypher’s eager operator and Max was building a chat bot.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_finding_the_most_relevant_entities_per_article">Finding the most relevant entities per article</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If we want to get a quick summary of the most important things in each TWIN4j article, we can use a technique called <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf" target="_blank" rel="noopener">tf-idf</a>.
This is a technique that I first learnt about 5 years ago when <a href="https://markhneedham.com/blog/2015/02/15/pythonscikit-learn-calculating-tfidf-on-how-i-met-your-mother-transcripts/" target="_blank" rel="noopener">exploring How I met your mother transcripts</a>.
Let’s refresh ourselves on the definition of tf-idf:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>tf–idf, short for term frequency–inverse document frequency, is a numerical statistic that is intended to reflect how important a word is to a document in a collection or corpus. It is often used as a weighting factor in information retrieval and text mining. The tf-idf value increases proportionally to the number of times a word appears in the document, but is offset by the frequency of the word in the corpus, which helps to adjust for the fact that some words appear more frequently in general.</p>
</div>
</blockquote>
<div class="attribution">
— https://en.wikipedia.org/wiki/Tf%E2%80%93idf
</div>
</div>
<div class="paragraph">
<p>Adam Cowley recently wrote a blog post <a href="https://adamcowley.co.uk/neo4j/calculating-tf-idf-score-cypher/" target="_blank" rel="noopener">explaining how to calculate tf-idf scores using Cypher</a>, and we can use his query to compute scores on our entity graph.</p>
</div>
<div class="paragraph">
<p>We’ll have to tweak Adam’s query to replace <code>Document</code> with <code>Article</code> and <code>Term</code> with <code>Entity</code>.
Everything else remains the same.
We can compute the tf-idf scores for the entities in one article by writing the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">// Total number of articles
MATCH (:Article) WITH count(*) AS totalArticles

// Find article and all its entities
MATCH (a:Article {id: 119258})-[entityRel:ENTITY]-(e:Entity)

// Get Statistics on Article and Entity
WITH a, e,
    totalArticles,
    size((a)-[:ENTITY]-&gt;(e)) AS occurrencesInArticle,
    size((a)-[:ENTITY]-&gt;()) AS entitiesInArticle,
    size(()-[:ENTITY]-&gt;(e)) AS articlesWithEntity

// Calculate TF and IDF
WITH a, e,
    totalArticles,
    1.0 * occurrencesInArticle / entitiesInArticle AS tf,
    log10( totalArticles / articlesWithEntity ) AS idf,
    occurrencesInArticle,
    entitiesInArticle,
    articlesWithEntity

// Combine together to return a result
RETURN a.id, e.text, tf * idf as tfIdf
ORDER BY tfIdf DESC
LIMIT 10;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Results</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">a.id</th>
<th class="tableblock halign-left valign-top">e.text</th>
<th class="tableblock halign-left valign-top">tfIdf</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Neo4j 3.x&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Yorghos Voutos&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;4.x&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Neo4j Graph Data Science Library&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;April 20, 2020&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Lambert Hogenhout&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;#graphtour 2020&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;pygds&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;7.1.0.M1&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119258</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#34;Groovy 3&#34;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.037311815666448325</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This article was likely the first time that the <a href="https://neo4j.com/docs/graph-data-science/current/" target="_blank" rel="noopener">Neo4j Graph Data Science Library</a> was mentioned, as well as the related <a href="https://pypi.org/project/pygds/" target="_blank" rel="noopener">pygds</a> library.
Let’s apply these scores to the whole entity graph.
We’ll add the tf-idf score to the <code>score</code> property of each <code>ENTITY</code> relationship.
The following query does this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">CALL apoc.periodic.iterate(
  &#34;MATCH (:Article)
   WITH count(*) AS totalArticles
   MATCH (a:Article)
   RETURN a, totalArticles&#34;,
  &#34;MATCH (a)-[entityRel:ENTITY]-(e:Entity)
   WITH a, e, entityRel,
        totalArticles,
        size((a)-[:ENTITY]-&gt;(e)) AS occurrencesInArticle,
        size((a)-[:ENTITY]-&gt;()) AS entitiesInArticle,
        size(()-[:ENTITY]-&gt;(e)) AS articlesWithEntity

   WITH a, e, entityRel,
        totalArticles,
        1.0 * occurrencesInArticle / entitiesInArticle AS tf,
        log10( totalArticles / articlesWithEntity ) AS idf,
        occurrencesInArticle,
        entitiesInArticle,
        articlesWithEntity

   SET entityRel.score = tf * idf&#34;,
  {}
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once this query has finished, we can find the highest ranking entities for each article by writing the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (a:Article)-[rel:ENTITY]-&gt;(e)
WITH a, e, rel
ORDER BY a.date DESC, rel.score DESC
RETURN date(a.date),  collect(e.text)[..10] AS entities
ORDER BY date(a.date) DESC
LIMIT 10;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Results</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">date(a.date)</th>
<th class="tableblock halign-left valign-top">entities</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;pygds&#34;, &#34;April 20, 2020&#34;, &#34;Lambert Hogenhout&#34;, &#34;#graphtour 2020&#34;, &#34;Yorghos Voutos&#34;, &#34;4.x&#34;, &#34;Neo4j Graph Data Science Library&#34;, &#34;Neo4j 3.x&#34;, &#34;Groovy 3&#34;, &#34;7.1.0.M1&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;(@Astayonix&#34;, &#34;Last night&#34;, &#34;Bloom Inzamam ul Haque&#34;, &#34;Connected Components&#34;, &#34;Spring Data Neo4j⚡&#34;, &#34;Epidemic Simulator&#34;, &#34;RX&#34;, &#34;This Year&#34;, &#34;Spring Data Neo4j RX 1.0 GA&#34;, &#34;) April 16&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;OGA&#34;, &#34;Lucas Moda&#34;, &#34;Library&#34;, &#34;one of the organizers&#34;, &#34;World Factbook&#34;, &#34;Greg Woods’&#34;, &#34;Markus Günther&#34;, &#34;Michael Simons’&#34;, &#34;Graph Data Science&#34;, &#34;Neo4j Tech&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Ubuntu 18.0.4 LTE&#34;, &#34;f4bl&#34;, &#34;pic.twitter.com/8fMYAmS6Js&#34;, &#34;Neo4j Dev Tools&#34;, &#34;JiliJeanlouis&#34;, &#34;Epimitheus&#34;, &#34;JUnit Jupiter Causal Cluster Testcontainer&#34;, &#34;March 29, 2020&#34;, &#34;1.2.6&#34;, &#34;Germany&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-03-28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Logan Smith&#34;, &#34;each one&#34;, &#34;Nerd’s Lab&#34;, &#34;March 24, 2020&#34;, &#34;PAF-Karachi Institute of Economics &amp; Technology&#34;, &#34;Lynn Chiu&#34;, &#34;CDC&#34;, &#34;late last year&#34;, &#34;WirvsVirusHackathon&#34;, &#34;TIBCO&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-02-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Flights&#34;, &#34;De Marzi&#34;, &#34;#GraphTour Madrid&#34;, &#34;Golven Leroy&#34;, &#34;Arrows Hacks&#34;, &#34;February 13, 2020&#34;, &#34;grapheverywhere&#34;, &#34;Eva Delier&#34;, &#34;SPARQL API&#34;, &#34;Global Graph Celebration Day 2020&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-02-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;SDN&#34;, &#34;GGCD 2020&#34;, &#34;Australian Open Finals&#34;, &#34;third beta&#34;, &#34;IFCA MSC BHD&#34;, &#34;about 30 minutes&#34;, &#34;Malaysia&#34;, &#34;Sinisa Drpa&#34;, &#34;emileifrem&#34;, &#34;8th year&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Personal Genome Project&#34;, &#34;to Dine: Building Possibility Spaces&#34;, &#34;Ten&#34;, &#34;Melbourne&#34;, &#34;Halfdan Rump&#34;, &#34;Paul Drangeid&#34;, &#34;ReactJS&#34;, &#34;Kelson Smith&#34;, &#34;January 22, 2020&#34;, &#34;Tom Cruise&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Pablo José&#34;, &#34;Daniel Murillo&#34;, &#34;@mckenzma&#34;, &#34;Flask Login&#34;, &#34;Karim Shehadeh&#34;, &#34;Laboratorio Internacional Web&#34;, &#34;Oscar Arcia&#34;, &#34;Vue.js&#34;, &#34;Donald Knuth&#34;, &#34;Atakan Güney&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;100 Male&#34;, &#34;NLTK&#34;, &#34;QuickGraph: Christmas Messages Graph&#34;, &#34;Footballers&#34;, &#34;TriGraph&#34;, &#34;Daniel Wilms&#34;, &#34;2.4 miles&#34;, &#34;Ben Albritton&#34;, &#34;January 9, 2020&#34;, &#34;Louise Söderström…&#34;]</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Or we could write a version of the query that only includes certain entities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cypher" data-lang="cypher">MATCH (a:Article)-[rel:ENTITY]-&gt;(e)
WHERE e:Title or e:Organization
WITH a, e, rel
ORDER BY a.date DESC, rel.score DESC
RETURN date(a.date),  collect(e.text)[..10] AS entities
ORDER BY date(a.date) DESC
LIMIT 10;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Results</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">date(a.date)</th>
<th class="tableblock halign-left valign-top">entities</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Covid Graph Knowledge Graph&#34;, &#34;Neo4j 3.x&#34;, &#34;7.1.0.M1&#34;, &#34;Grails&#34;, &#34;Groovy 3&#34;, &#34;pygds&#34;, &#34;Neo4j Graph Data Science Library&#34;, &#34;United Nations&#34;, &#34;Goals&#34;, &#34;-19&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Spring Data Neo4j⚡RX&#34;, &#34;Inzamam&#34;, &#34;Graphs4Good GraphHack&#34;, &#34;Spring Data Neo4j RX 1.0 GA&#34;, &#34;Connected Components&#34;, &#34;Spring Data Neo4j⚡&#34;, &#34;Spring Data Neo4j + Neo4j-OGM&#34;, &#34;CypherDSL&#34;, &#34;Exposure Tracker&#34;, &#34;Project Domino&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Library&#34;, &#34;Graph Data Science&#34;, &#34;World Factbook&#34;, &#34;SDN RX&#34;, &#34;JDK 14&#34;, &#34;Query Neo4j&#34;, &#34;JShell&#34;, &#34;OGA&#34;, &#34;Mentum Systems Australia&#34;, &#34;Neo4j Tech&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Sysmon Visualization&#34;, &#34;Epimitheus&#34;, &#34;BloodHound 3.0&#34;, &#34;Graphlytic for Fraud&#34;, &#34;Graphlytic&#34;, &#34;JUnit Jupiter Causal Cluster Testcontainer&#34;, &#34;Ubuntu 18.0.4 LTE&#34;, &#34;Neo4j Dev Tools&#34;, &#34;1.2.6&#34;, &#34;f4bl&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-03-28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Neo4j BI Connector&#34;, &#34;Graph to the Rescue&#34;, &#34;BI Connector&#34;, &#34;Tableau&#34;, &#34;Looker&#34;, &#34;Spotfire Server&#34;, &#34;PAF-Karachi Institute of Economics &amp; Technology&#34;, &#34;Nerd’s Lab&#34;, &#34;WirvsVirusHackathon&#34;, &#34;Upcode Academy&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-02-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;SPARQL API&#34;, &#34;Arrows Hacks&#34;, &#34;Flights&#34;, &#34;Cypher Shell&#34;, &#34;Wikidata SPARQL API&#34;, &#34;Django Software Foundation&#34;, &#34;grapheverywhere&#34;, &#34;3.5&#34;, &#34;Arrows&#34;, &#34;Wikidata&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-02-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Streamlit&#34;, &#34;Lisk&#34;, &#34;Ansible&#34;, &#34;SDN&#34;, &#34;IFCA MSC BHD&#34;, &#34;Spring Data Neo4j RX&#34;, &#34;Neo4j Graph&#34;, &#34;QuickGraph&#34;, &#34;Neo4j 4.0&#34;, &#34;Lju&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;to Dine: Building Possibility Spaces&#34;, &#34;Personal Genome Project&#34;, &#34;vCenter&#34;, &#34;GCP&#34;, &#34;ReactJS&#34;, &#34;WordPress&#34;, &#34;QuickGraph&#34;, &#34;Javascript&#34;, &#34;AWS&#34;, &#34;Google&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Vue.js&#34;, &#34;Monific&#34;, &#34;Mitzu&#34;, &#34;Algorithm X&#34;, &#34;Flask Login&#34;, &#34;Kafka Taiwo&#34;, &#34;Graphistania 2.0&#34;, &#34;Under Armour&#34;, &#34;Laboratorio Internacional Web&#34;, &#34;CMDX&#34;]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#34;Ninja&#34;, &#34;Heathers and Label&#34;, &#34;TriGraph&#34;, &#34;100 Male&#34;, &#34;QuickGraph: Christmas Messages Graph&#34;, &#34;F#&#34;, &#34;Guardian&#34;, &#34;Islamic Scientific Manuscripts Initiative&#34;, &#34;Neo4j Ninja&#34;, &#34;Sudoku&#34;]</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_whats_interesting_about_this_quickgraph">What’s interesting about this QuickGraph?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this QuickGraph we’ve learnt how to build a graph based on content that initially didn’t have any structure.
There’s a lot more data around that doesn’t have structure than that with structure, so techniques that help make sense of unstructured data are very useful.</p>
</div>
<div class="paragraph">
<p>This is not a new technique, in fact there are many videos explaining the value of this approach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.youtube.com/watch?v=k8Gu6GMbBtQ" target="_blank" rel="noopener">Knowledge Graph Search with Elasticsearch — L. Misquitta and A. Negro, GraphAware</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=BVMx24dtko0" target="_blank" rel="noopener">Natural Language Processing with Graphs</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=ySxgzBdM2jM" target="_blank" rel="noopener">Content-Based Recommendations using Knowledge Graphs (Neo4j Online Meetup #59)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The procedures described in this post aim to make the technique more easily accessible to graph practitioners.</p>
</div>
</div>
</div>

    <div id="social-bar">
	<ul class="rrssb-buttons clearfix">
      <li class="email">
          <a href="mailto:?subject=QuickGraph%20%237%3a%20An%20entity%20graph%20of%20TWIN4j%20using%20APOC%20NLP&amp;body=https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/">
              <span class="icon">
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                      <path transform="scale(0.014,-0.014) translate(0,-1670)" d="M1792 826v-794q0 -66 -47 -113t-113 -47h-1472q-66 0 -113 47t-47 113v794q44 -49 101 -87q362 -246 497 -345q57 -42 92.5 -65.5t94.5 -48t110 -24.5h1h1q51 0 110 24.5t94.5 48t92.5 65.5q170 123 498 345q57 39 100 87zM1792 1120q0 -79 -49 -151t-122 -123 q-376 -261 -468 -325q-10 -7 -42.5 -30.5t-54 -38t-52 -32.5t-57.5 -27t-50 -9h-1h-1q-23 0 -50 9t-57.5 27t-52 32.5t-54 38t-42.5 30.5q-91 64 -262 182.5t-205 142.5q-62 42 -117 115.5t-55 136.5q0 78 41.5 130t118.5 52h1472q65 0 112.5 -47t47.5 -113z"/>
                  </svg>
              </span>
              <span class="text">Email</span>
          </a>
      </li>
      <li class="facebook">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/" class="popup">
              <span class="icon">
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                      <path d="M27.825,4.783c0-2.427-2.182-4.608-4.608-4.608H4.783c-2.422,0-4.608,2.182-4.608,4.608v18.434 c0,2.427,2.181,4.608,4.608,4.608H14V17.379h-3.379v-4.608H14v-1.795c0-3.089,2.335-5.885,5.192-5.885h3.718v4.608h-3.726 c-0.408,0-0.884,0.492-0.884,1.236v1.836h4.609v4.608h-4.609v10.446h4.916c2.422,0,4.608-2.188,4.608-4.608V4.783z"/>
                  </svg>
              </span>
              <span class="text">Facebook</span>
          </a>
      </li>
			<li class="twitter">
          <a href="http://twitter.com/home?status=QuickGraph%20%237%3a%20An%20entity%20graph%20of%20TWIN4j%20using%20APOC%20NLP%20https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/" class="popup">
              <span class="icon">
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
		                  <path d="M24.253,8.756C24.689,17.08,18.297,24.182,9.97,24.62c-3.122,0.162-6.219-0.646-8.861-2.32 c2.703,0.179,5.376-0.648,7.508-2.321c-2.072-0.247-3.818-1.661-4.489-3.638c0.801,0.128,1.62,0.076,2.399-0.155 C4.045,15.72,2.215,13.6,2.115,11.077c0.688,0.275,1.426,0.407,2.168,0.386c-2.135-1.65-2.729-4.621-1.394-6.965 C5.575,7.816,9.54,9.84,13.803,10.071c-0.842-2.739,0.694-5.64,3.434-6.482c2.018-0.623,4.212,0.044,5.546,1.683 c1.186-0.213,2.318-0.662,3.329-1.317c-0.385,1.256-1.247,2.312-2.399,2.942c1.048-0.106,2.069-0.394,3.019-0.851 C26.275,7.229,25.39,8.196,24.253,8.756z"/>
                  </svg>
              </span>
              <span class="text">Twitter</span>
          </a>
      </li>
			<li class="linkedin">
          <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/&amp;title=QuickGraph%20%237%3a%20An%20entity%20graph%20of%20TWIN4j%20using%20APOC%20NLP&amp;summary=One%20of%20the%20most%20popular%20use%20cases%20for%20Neo4j%20is%20knowledge%20graphs%2c%20and%20part%20of%20that%20process%20involves%20using%20NLP%20to%20create%20a%20graph%20structure%20from%20raw%20text.%20If%20we%20were%20doing%20a%20serious%20NLP%20project%20we%e2%80%99d%20want%20to%20use%20something%20like%20GraphAware%20Hume%2c%20but%20in%20this%20blog%20post%20we%e2%80%99re%20going%20to%20learn%20how%20to%20add%20basic%20NLP%20functionality%20to%20our%20graph%20applications.%0aFigure%201.%20Building%20an%20entity%20graph%20of%20TWIN4j%20using%20APOC%20NLP%20APOC%20NLP%20The%20big%20cloud%20providers%20%28AWS%2c%20GCP%2c%20and%20Azure%29%20all%20have%20Natural%20Language%20Processing%20APIs%20and%2c%20although%20their%20APIs%20aren%e2%80%99t%20identical%2c%20they%20all%20let%20us%20extract%20entities%2c%20key%20phrases%2c%20and%20sentiment%20from%20text%20documents...." class="popup">
              <span class="icon">
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                      <path d="M25.424,15.887v8.447h-4.896v-7.882c0-1.979-0.709-3.331-2.48-3.331c-1.354,0-2.158,0.911-2.514,1.803 c-0.129,0.315-0.162,0.753-0.162,1.194v8.216h-4.899c0,0,0.066-13.349,0-14.731h4.899v2.088c-0.01,0.016-0.023,0.032-0.033,0.048 h0.033V11.69c0.65-1.002,1.812-2.435,4.414-2.435C23.008,9.254,25.424,11.361,25.424,15.887z M5.348,2.501 c-1.676,0-2.772,1.092-2.772,2.539c0,1.421,1.066,2.538,2.717,2.546h0.032c1.709,0,2.771-1.132,2.771-2.546 C8.054,3.593,7.019,2.501,5.343,2.501H5.348z M2.867,24.334h4.897V9.603H2.867V24.334z"/>
                  </svg>
              </span>
              <span class="text">LinkedIn</span>
          </a>
      </li>
      <li class="tumblr">
					<script>
						document.write('<a href="http://www.tumblr.com/share?v=3&amp;u=' + encodeURIComponent('https:\/\/www.markhneedham.com\/blog\/2020\/05\/05\/quick-graph-building-entity-graph-twin4j-apoc-nlp\/') + '&amp;t=QuickGraph #7: An entity graph of TWIN4j using APOC NLP" class="popup">');
					</script>
              <span class="icon">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
											<path d="M18.02 21.842c-2.029 0.052-2.422-1.396-2.439-2.446v-7.294h4.729V7.874h-4.71V1.592c0 0-3.653 0-3.714 0 s-0.167 0.053-0.182 0.186c-0.218 1.935-1.144 5.33-4.988 6.688v3.637h2.927v7.677c0 2.8 1.7 6.7 7.3 6.6 c1.863-0.03 3.934-0.795 4.392-1.453l-1.22-3.539C19.595 21.6 18.7 21.8 18 21.842z"/>
									</svg>
              </span>
              <span class="text">Tumblr</span>
          <script>document.write('</a>');</script>
      </li>
      <li class="reddit">
          <a href="http://www.reddit.com/submit?url=https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/">
              <span class="icon">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
											<g>
													<path d="M11.794 15.316c0-1.029-0.835-1.895-1.866-1.895c-1.03 0-1.893 0.865-1.893 1.895s0.863 1.9 1.9 1.9 C10.958 17.2 11.8 16.3 11.8 15.316z"/>
													<path d="M18.1 13.422c-1.029 0-1.895 0.864-1.895 1.895c0 1 0.9 1.9 1.9 1.865c1.031 0 1.869-0.836 1.869-1.865 C19.969 14.3 19.1 13.4 18.1 13.422z"/>
													<path d="M17.527 19.791c-0.678 0.678-1.826 1.006-3.514 1.006c-0.004 0-0.009 0-0.014 0c-0.004 0-0.01 0-0.015 0 c-1.686 0-2.834-0.328-3.51-1.005c-0.264-0.265-0.693-0.265-0.958 0c-0.264 0.265-0.264 0.7 0 1 c0.943 0.9 2.4 1.4 4.5 1.402c0.005 0 0 0 0 0c0.005 0 0 0 0 0c2.066 0 3.527-0.459 4.47-1.402 c0.265-0.264 0.265-0.693 0.002-0.958C18.221 19.5 17.8 19.5 17.5 19.791z"/>
													<path d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237c-0.793 0-1.518 0.287-2.082 0.761c-2.039-1.295-4.646-2.069-7.438-2.219 l1.483-4.691l4.062 0.956c0.071 1.4 1.3 2.6 2.7 2.555c1.488 0 2.695-1.208 2.695-2.695C25.881 3.2 24.7 2 23.2 2 c-1.059 0-1.979 0.616-2.42 1.508l-4.633-1.091c-0.344-0.081-0.693 0.118-0.803 0.455l-1.793 5.7 C10.548 8.6 7.7 9.4 5.6 10.75C5.006 10.3 4.3 10 3.5 10.029c-1.785 0-3.237 1.452-3.237 3.2 c0 1.1 0.6 2.1 1.4 2.69c-0.04 0.272-0.061 0.551-0.061 0.831c0 2.3 1.3 4.4 3.7 5.9 c2.299 1.5 5.3 2.3 8.6 2.325c3.228 0 6.271-0.825 8.571-2.325c2.387-1.56 3.7-3.66 3.7-5.917 c0-0.26-0.016-0.514-0.051-0.768C27.088 15.5 27.7 14.4 27.7 13.267z M23.186 3.355c0.74 0 1.3 0.6 1.3 1.3 c0 0.738-0.6 1.34-1.34 1.34s-1.342-0.602-1.342-1.34C21.844 4 22.4 3.4 23.2 3.355z M1.648 13.3 c0-1.038 0.844-1.882 1.882-1.882c0.31 0 0.6 0.1 0.9 0.209c-1.049 0.868-1.813 1.861-2.26 2.9 C1.832 14.2 1.6 13.8 1.6 13.267z M21.773 21.57c-2.082 1.357-4.863 2.105-7.831 2.105c-2.967 0-5.747-0.748-7.828-2.105 c-1.991-1.301-3.088-3-3.088-4.782c0-1.784 1.097-3.484 3.088-4.784c2.081-1.358 4.861-2.106 7.828-2.106 c2.967 0 5.7 0.7 7.8 2.106c1.99 1.3 3.1 3 3.1 4.784C24.859 18.6 23.8 20.3 21.8 21.57z M25.787 14.6 c-0.432-1.084-1.191-2.095-2.244-2.977c0.273-0.156 0.59-0.245 0.928-0.245c1.035 0 1.9 0.8 1.9 1.9 C26.354 13.8 26.1 14.3 25.8 14.605z"/>
											</g>
									</svg>
              </span>
              <span class="text">Reddit</span>
          </a>
      </li>
      <li class="googleplus">
          <a href="https://plus.google.com/share?url=https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/" class="popup">
              <span class="icon">
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                      <g>
                          <path d="M14.703,15.854l-1.219-0.948c-0.372-0.308-0.88-0.715-0.88-1.459c0-0.748,0.508-1.223,0.95-1.663 c1.42-1.119,2.839-2.309,2.839-4.817c0-2.58-1.621-3.937-2.399-4.581h2.097l2.202-1.383h-6.67c-1.83,0-4.467,0.433-6.398,2.027 C3.768,4.287,3.059,6.018,3.059,7.576c0,2.634,2.022,5.328,5.604,5.328c0.339,0,0.71-0.033,1.083-0.068 c-0.167,0.408-0.336,0.748-0.336,1.324c0,1.04,0.551,1.685,1.011,2.297c-1.524,0.104-4.37,0.273-6.467,1.562 c-1.998,1.188-2.605,2.916-2.605,4.137c0,2.512,2.358,4.84,7.289,4.84c5.822,0,8.904-3.223,8.904-6.41 c0.008-2.327-1.359-3.489-2.829-4.731H14.703z M10.269,11.951c-2.912,0-4.231-3.765-4.231-6.037c0-0.884,0.168-1.797,0.744-2.511 c0.543-0.679,1.489-1.12,2.372-1.12c2.807,0,4.256,3.798,4.256,6.242c0,0.612-0.067,1.694-0.845,2.478 c-0.537,0.55-1.438,0.948-2.295,0.951V11.951z M10.302,25.609c-3.621,0-5.957-1.732-5.957-4.142c0-2.408,2.165-3.223,2.911-3.492 c1.421-0.479,3.25-0.545,3.555-0.545c0.338,0,0.52,0,0.766,0.034c2.574,1.838,3.706,2.757,3.706,4.479 c-0.002,2.073-1.736,3.665-4.982,3.649L10.302,25.609z"/>
                          <polygon points="23.254,11.89 23.254,8.521 21.569,8.521 21.569,11.89 18.202,11.89 18.202,13.604 21.569,13.604 21.569,17.004 23.254,17.004 23.254,13.604 26.653,13.604 26.653,11.89"/>
                      </g>
                  </svg>
              </span>
              <span class="text">Google+</span>
          </a>
      </li>
      <li class="pinterest">
          <script>
						var imgurl = "https:\/\/www.markhneedham.com\/blog\/logo.png";
						var firstimg = document.getElementsByClassName("2020")[0].getElementsByTagName("img")[0];
						if (firstimg !== undefined) {
							imgurl = firstimg.src;
						}
						document.write('<a href="http://pinterest.com/pin/create/button/?url=https:\/\/www.markhneedham.com\/blog\/2020\/05\/05\/quick-graph-building-entity-graph-twin4j-apoc-nlp\/&amp;media=' + imgurl + '&amp;description=QuickGraph #7: An entity graph of TWIN4j using APOC NLP" class="popup">');
					</script>
              <span class="icon">
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
		                  <path d="M14.021,1.57C6.96,1.57,1.236,7.293,1.236,14.355c0,7.062,5.724,12.785,12.785,12.785c7.061,0,12.785-5.725,12.785-12.785 C26.807,7.294,21.082,1.57,14.021,1.57z M15.261,18.655c-1.161-0.09-1.649-0.666-2.559-1.219c-0.501,2.626-1.113,5.145-2.925,6.458 c-0.559-3.971,0.822-6.951,1.462-10.116c-1.093-1.84,0.132-5.545,2.438-4.632c2.837,1.123-2.458,6.842,1.099,7.557 c3.711,0.744,5.227-6.439,2.925-8.775c-3.325-3.374-9.678-0.077-8.897,4.754c0.19,1.178,1.408,1.538,0.489,3.168 C7.165,15.378,6.53,13.7,6.611,11.462c0.131-3.662,3.291-6.227,6.46-6.582c4.007-0.448,7.771,1.474,8.29,5.239 c0.579,4.255-1.816,8.865-6.102,8.533L15.261,18.655z"/>
                  </svg>
              </span>
              <span class="text">Pinterest</span>
          <script>document.write('</a>');</script>
      </li>
      <li class="pocket">
          <a href="https://getpocket.com/save?url=https://www.markhneedham.com/blog/2020/05/05/quick-graph-building-entity-graph-twin4j-apoc-nlp/"  class="popup">
              <span class="icon">
                  <svg width="32px" height="28px" viewBox="0 0 32 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                      <path d="M28.7817528,0.00172488695 C30.8117487,0.00431221738 31.9749312,1.12074529 31.9644402,3.10781507 C31.942147,6.67703739 32.1336065,10.2669583 31.8057648,13.8090137 C30.7147076,25.5813672 17.2181194,31.8996281 7.20714461,25.3808491 C2.71833574,22.4571656 0.196577202,18.3122624 0.0549495772,12.9357897 C-0.0342233715,9.5774348 0.00642900214,6.21519891 0.0300336062,2.85555035 C0.0405245414,1.1129833 1.21157517,0.0146615391 3.01995012,0.00819321302 C7.34746087,-0.00603710433 11.6775944,0.00431221738 16.0064164,0.00172488695 C20.2644248,0.00172488695 24.5237444,-0.00215610869 28.7817528,0.00172488695 L28.7817528,0.00172488695 Z M8.64885184,7.85611511 C7.38773662,7.99113854 6.66148108,8.42606978 6.29310958,9.33228474 C5.90114134,10.2969233 6.17774769,11.1421181 6.89875951,11.8276216 C9.35282156,14.161969 11.8108164,16.4924215 14.2976518,18.7943114 C15.3844131,19.7966007 16.5354102,19.7836177 17.6116843,18.7813283 C20.0185529,16.5495467 22.4070683,14.2982907 24.7824746,12.0327533 C25.9845979,10.8850542 26.1012707,9.56468083 25.1469132,8.60653379 C24.1361858,7.59255976 22.8449191,7.6743528 21.5890476,8.85191291 C19.9936451,10.3488554 18.3680912,11.8172352 16.8395462,13.3777945 C16.1342655,14.093159 15.7200114,14.0048744 15.0566806,13.3440386 C13.4599671,11.7484252 11.8081945,10.2060421 10.1262706,8.70001155 C9.65564653,8.27936164 9.00411403,8.05345704 8.64885184,7.85611511 L8.64885184,7.85611511 L8.64885184,7.85611511 Z"></path>
                  </svg>
              </span>
              <span class="text">Pocket</span>
          </a>
      </li>
  </ul>
</div>

    <div itemprop="author" itemscope itemtype="http://schema.org/Person">
  <h5>About the author</h5>
  <section>
    <p><a href="https://twitter.com/markhneedham" itemprop="name" rel="author">I'm</a> currently working on real-time user-facing analytics with <a href="https://pinot.apache.org/">Apache Pinot</a> at <a href="https://www.startree.ai/">StarTree</a>. I publish short 5 minute videos showing how to solve data problems on YouTube <a href="https://www.youtube.com/@LearnDataWithMark">@LearnDataWithMark</a>. I previously worked on graph analytics at <a href="https://neo4j.com/">Neo4j</a>, where I also I co-authored the <a href="https://neo4j.com/graph-algorithms-book">O'Reilly Graph Algorithms Book</a> with Amy Hodler.</p>
  </section>
</div>

    <div id="comments">
    
    
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'markhneedham';
      var disqus_identifier = 'https:\/\/www.markhneedham.com\/blog\/2020\/05\/05\/quick-graph-building-entity-graph-twin4j-apoc-nlp\/';
      var disqus_title = 'QuickGraph #7: An entity graph of TWIN4j using APOC NLP';
      var disqus_url = 'https:\/\/www.markhneedham.com\/blog\/2020\/05\/05\/quick-graph-building-entity-graph-twin4j-apoc-nlp\/';
      (function() {
        if (window.location.hostname == "localhost")
                return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
    
</div>

</article>

</main>

  <footer id="footer">
			<section id="footer-message">&copy; Mark Needham. All rights reserved. Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>. <a href="https://github.com/kathyqian/crisp-ghost-theme" target="_blank">Crisp</a> theme by <a href="http://kathyqian.com" target="_blank">Kathy Qian</a>.</section>
		</footer>

    <script>
      (function(c,f){asyncLoader=function(i,h){i.foreach(function(k,j){e(j,d(j),h)});if(typeof h.callback=="function"){var g=setInterval(function(){if(f.readyState==="complete"){clearInterval(g);h.callback()}},10)}};var d=function(g){var h=g.split(".");return h[h.length-1]},e=function(h,i,g){switch(i){case"js":a(h,g);break;case"css":b(h);break;default:break}},a=function(i,h){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src=i;document.getElementsByTagName("head")[0].appendChild(g)},b=function(g){var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=g;document.getElementsByTagName("head")[0].appendChild(h)};Array.prototype.foreach=function(h){for(var g=0;g<this.length;g++){h(g,this[g])}}})(this,document);

      var WebFontConfig={google:{families:["Open Sans:300italic,700italic,300,700","Bree+Serif"]}};
      asyncLoader([
        "//netdna.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.css",
        "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js",
        "//cdnjs.cloudflare.com/ajax/libs/webfont/1.5.16/webfontloader.js",
        "//unpkg.com/@highlightjs/cdn-assets@10.7.2/highlight.min.js"        
      ],{
        callback:function(){
          asyncLoader([
            "https:\/\/www.markhneedham.com\/blog\/css/rrssb.css",
            "https:\/\/www.markhneedham.com\/blog\/css/github-dark.css",
            "https:\/\/www.markhneedham.com\/blog\/js/image-zoom.js",
            "https:\/\/www.markhneedham.com\/blog\/js/gist.min.js",
            "https:\/\/www.markhneedham.com\/blog\/js/rrssb.min.js",
            "https://unpkg.com/highlightjs-cypher/dist/cypher.min.js",            
          ], { callback:function() {
              
              document.querySelectorAll('pre code').forEach((block) => {
                  hljs.highlightElement(block);                  
                  
                  var language = block.result.language;
                  if(language && language !== "text") {             
                    const originalCode = block.textContent.trim(); 
                    const labelAndButtonHTML = `
                      <span class="label-and-button">
                        <label class="label-right">${language.toUpperCase()}</label>
                        <i class="copy-button fa fa-copy"></i>
                      </span>
                    `;
                    block.insertAdjacentHTML("afterbegin", `<label class="label-right">${language.toUpperCase()} <i class="copy-button fa fa-copy"></i></label>`);

                    const button = block.querySelector('.copy-button');
                    button.addEventListener('click', (event) => {
                        var code = button.parentElement.textContent;
                        navigator.clipboard.writeText(originalCode).then(function() {
                          button.classList.remove('fa-copy');  // Remove the copy icon class
                          button.classList.add('fa-check', 'green-icon');  

                          setTimeout(function() {
                              button.classList.remove('fa-check', 'green-icon');  
                              button.classList.add('fa-copy');  
                          }, 2000);
                        }, function(err) {
                             
                            console.error('Could not copy code to clipboard: ', err);
                        });
                    });
                  }                  
              });
          }});
        }
      });
    </script>
	
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-KVLB7W6R20"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'G-KVLB7W6R20');
    </script>

    

    


  
	</body>
</html>

